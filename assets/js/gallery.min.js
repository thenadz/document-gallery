(function(b){function g(){e=[];f=0;b(".document-icon[data-id]").each(function(){var a=b(this).data("id");-1===b.inArray(a,e)&&e.push(a)});h()}function k(a,d){b.post(ajaxurl,{action:"dg_generate_gallery",atts:a},function(a){d.replaceWith(a);g()})}function h(){for(var a=[];f<e.length&&2!==a.length;f++)a.push(e[f]);0!=a.length&&b.post(ajaxurl,{action:"dg_generate_icons",ids:a},l)}function l(a){for(var d in a)if(a.hasOwnProperty(d)){var c=b('.document-icon[data-id="'+d+'"] img');c.removeAttr("data-id");
(function(c,d){d.fadeOut("fast",function(){b(this).attr("src",a[c]);b(this).fadeIn("fast")})})(d,c)}h()}var e,f;b(document).ready(function(){g();b("body").delegate(".dg-paginate-wrapper a.paginate","click",function(a){var d=b(this).closest(".dg-paginate-wrapper"),c=d.children("div[data-shortcode]").data("shortcode");c.hasOwnProperty("skip")||(c.skip=0);b(this).hasClass("left")?c.skip-=c.limit:c.skip+=c.limit;k(c,d);a.preventDefault()});"undefined"!==typeof tinymce&&tinymce.PluginManager.add("dg",
function(a,d){a.on("LoadContent dgUpdate undo",function(a){b(a.target.contentDocument).find(".wpview-type-dg > [data-shortcode]").each(function(){k(b.parseJSON(decodeURIComponent(b(this).data("shortcode"))),b(this))})})})})})(jQuery);
